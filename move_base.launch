<launch>

   <master auto="start"/>
 <!-- Run the map server --> 
    <node name="map_server" pkg="map_server" type="map_server" args="$(find p3dx_2dnav)/my_office.yaml " output="screen"/>

 <!--- Run AMCL --> 
    <include file="$(find amcl)/examples/amcl_diff.launch" />

   <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <rosparam file="$(find p3dx_2dnav)/costmap_common_params.yaml" command="load" ns="global_costmap" /> 
    <rosparam file="$(find p3dx_2dnav)/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find p3dx_2dnav)/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find p3dx_2dnav)/global_costmap_params.yaml" command="load" /> 
    <rosparam file="$(find p3dx_2dnav)/base_local_planner_params.yaml" command="load" />
 </node>
<arg name="model" default="/home/dai/catkin_ws/src/amr-ros-config/description/urdf/pioneer3dx.urdf"/>
  <arg name="gui" default="False" />
  <param name="robot_description" textfile="$(arg model)" />
 <param name="use_gui" value="$(arg gui)"/>
  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" ></node>
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher" />

<!--Run Rviz-->
<!--node name="rviz" pkg="rviz" type="rviz" args="-d $(find rbx1_nav)/nav_ekf.rviz"/ -->
<node pkg="rviz" type="rviz" name="rviz" />
<!--static tf -->
<node pkg="tf" type="static_transform_publisher" name="map2tag" args="0.0 0.0 0 0 0 0 /map /odom 100" />
<!--Run p3dx model -->
<arg name="urdf" default="$(find amr_robots_description)/urdf/pioneer3dx.urdf" />

 </launch> 
